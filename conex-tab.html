<!DOCTYPE html>
<html lang="en">
  <head>
    <title>tab item</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <link rel="stylesheet" type="text/css" href="styles.css">
  </head>
  <script type="module">
  // alias for document.querySelectorAll
  const $ = function(s, parent){ return (parent || document).querySelectorAll(s); };

  // alias for document.querySelector
  const $1 = function(s, parent){ return (parent || document).querySelector(s); };


  const tabItem = (data) => `
    <form class="tab ${data.color}" action="">
      <input type="hidden" name="tab-id" value="${data.tabId}"/>
      <input title="show tab" type="radio" id="tabid-${data.tabId}-title" name="action" value="focus-tab"/>
      <label title="show tab" class="tab-thumbnail" for="tabid-${data.tabId}-title">
        <img class="thumbnail-image" src="${data.thumbnail}" alt="thumbnail" width="200"/>
      </label>
      <label title="show tab" class="tab-favicon" for="tabid-${data.tabId}-title">
        <img class="favicon-image" alt="favicon" src="${data.favicon}" />
      </label>
      <label title="show tab" class="tab-content" for="tabid-${data.tabId}-title">
          <div class="tab-title">${data.title}</div>
          <div class="tab-url">${data.url}</div>
      </label>
      <input title="close tab" type="radio" id="tabid-${data.tabId}-close-tab" name="action" value="close-tab"/>
      <label title="close tab" class="tab-close" for="tabid-${data.tabId}-close-tab">&#9587;</label>
      <input type="submit"/>
    </form>
   `;

   class TabItem extends HTMLElement {
     constructor() {
       super();
       console.debug(this);
       const d = {color: this.getAttribute('color'),
                 tabId: this.getAttribute('tab-id'),
                 thumbnail: this.getAttribute('thumbnail'),
                 favicon: this.getAttribute('favicon'),
                 title: this.getAttribute('tab-title'),
                 url: this.getAttribute('url')}

       this.innerHTML = tabItem(d);
       const form = $1('form', this);

       form.addEventListener("change", e => {
         console.debug('form onchange', $1('input[name=action]:checked').value);
       });
       this.addEventListener("focus", e => console.debug('focused', this));
       this.addEventListener('click', e => this.focus());

       this.addEventListener("keyup", e => {
         console.debug('keyup', e, this);
       });
     }

     connectedCallback() {
       console.debug('tab-titem connected');
     }

     disconnectedCallback() {
       console.debug('tab-item disconnnected');
     }

     adoptedCallback() {
       console.debug('tab-item adopted');
     }

   };

   customElements.define('tab-item', TabItem);
  </script>
  <body>
    <a href="#" onclick="javascript:setTimeout(function() {document.querySelector('tab-item').focus(); console.debug(document.activeElement);}, 300);">XXXXXXXXXXX</a>
    <tab-item tabindex='1' color='blue-marker' tab-id='40' thumbnail='./thumbnail.jpg' favicon='./favicon.ico' tab-title='this is a wonderful title' url='heise.de/artikel/golang'></tab-item>
    <tab-item tabindex='2' color='blue-marker' tab-id='41' thumbnail='./thumbnail.jpg' favicon='./favicon.ico' tab-title='this is a wonderful title' url='heise.de/artikel/golang'></tab-item>
    <tab-item tabindex='3' color='blue-marker' tab-id='42' thumbnail='./thumbnail.jpg' favicon='./favicon.ico' tab-title='this is a wonderful title' url='heise.de/artikel/golang'></tab-item>
    <tab-item tabindex='4' color='blue-marker' tab-id='43' thumbnail='./thumbnail.jpg' favicon='./favicon.ico' tab-title='this is a wonderful title' url='heise.de/artikel/golang'></tab-item>
    <tab-item tabindex='5' color='blue-marker' tab-id='44' thumbnail='./thumbnail.jpg' favicon='./favicon.ico' tab-title='this is a wonderful title' url='heise.de/artikel/golang'></tab-item>
    <tab-item tabindex='6' color='blue-marker' tab-id='45' thumbnail='./thumbnail.jpg' favicon='./favicon.ico' tab-title='this is a wonderful title' url='heise.de/artikel/golang'></tab-item>
    <tab-item tabindex='7' color='blue-marker' tab-id='46' thumbnail='./thumbnail.jpg' favicon='./favicon.ico' tab-title='this is a wonderful title' url='heise.de/artikel/golang'></tab-item>
    <tab-item tabindex='8' color='blue-marker' tab-id='47' thumbnail='./thumbnail.jpg' favicon='./favicon.ico' tab-title='this is a wonderful title' url='heise.de/artikel/golang'></tab-item>
    <tab-item tabindex='9' color='blue-marker' tab-id='48' thumbnail='./thumbnail.jpg' favicon='./favicon.ico' tab-title='this is a wonderful title' url='heise.de/artikel/golang'></tab-item>
    <tab-item tabindex='10' color='blue-marker' tab-id='49' thumbnail='./thumbnail.jpg' favicon='./favicon.ico' tab-title='this is a wonderful title' url='heise.de/artikel/golang'></tab-item>
    <!--
    <container-item>
      <form class="tab blue-marker" action="">
        <input type="hidden" name="tab-id" value="40">
        <input title="show tab" type="radio" id="tabid-40-title" name="action" value="focus-tab">
        <label title="show tab" class="tab-thumbnail" for="tabid-40-title">
          <img class="thumbnail-image" src="./thumbnail.jpg" alt="thumbnail" width="200">
        </label>
        <label title="show tab" class="tab-favicon" for="tabid-40-title">
          <img class="favicon-image" alt="favicon" src="./favicon.ico">
        </label>
        <label title="show tab" class="tab-content" for="tabid-40-title">
            <div class="tab-title">this is a wonderful title</div>
            <div class="tab-url">heise.de/artikel/golang</div>
        </label>
        <input title="close tab" type="radio" id="tabid-40-close-tab" name="action" value="close-tab">
        <label title="close tab" class="tab-close" for="tabid-40-close-tab">â•³</label>
        <input type="submit">
      </form>
    </container-item>
    -->
  </body>
</html>
